{
  "id": 5,
  "title": "数据包分析",
  "lessonContent": "数据包分析的主题可以填满一整门课程，有许多书籍专门讨论数据包分析。然而，今天我们只会学习基础知识。有两个非常流行的数据包分析工具，Wireshark 和 tcpdump。这些工具扫描您的网络接口，捕获数据包活动，解析数据包并输出信息供我们查看。它们让我们深入网络分析的细节，深入低级别的内容。我们将使用 tcpdump，因为它具有更简单的界面，但是如果您要选择数据包分析作为工具，我建议您研究一下 Wireshark。\n\n<b>安装 tcpdump</b>\n\n<pre>\n$ sudo apt install tcpdump\n</pre>\n\n<b>在接口上捕获数据包</b>\n\n<pre>\npete@icebox:~$ sudo tcpdump -i wlan0\ntcpdump: verbose output suppressed, use -v or -vv for full protocol decode\nlistening on wlan0, link-type EN10MB (Ethernet), capture size 65535 bytes\n11:28:23.958840 IP icebox.lan > nuq04s29-in-f4.1e100.net: ICMP echo request, id 1901, seq 2, length 64\n11:28:23.970928 IP nuq04s29-in-f4.1e100.net > icebox.lan: ICMP echo reply, id 1901, seq 2, length 64\n11:28:24.960464 IP icebox.lan > nuq04s29-in-f4.1e100.net: ICMP echo request, id 1901, seq 3, length 64\n11:28:24.979299 IP nuq04s29-in-f4.1e100.net > icebox.lan: ICMP echo reply, id 1901, seq 3, length 64\n11:28:25.961869 IP icebox.lan > nuq04s29-in-f4.1e100.net: ICMP echo request, id 1901, seq 4, length 64\n11:28:25.976176 IP nuq04s29-in-f4.1e100.net > icebox.lan: ICMP echo reply, id 1901, seq 4, length 64\n11:28:26.963667 IP icebox.lan > nuq04s29-in-f4.1e100.net: ICMP echo request, id 1901, seq 5, length 64\n11:28:26.976137 IP nuq04s29-in-f4.1e100.net > icebox.lan: ICMP echo reply, id 1901, seq 5, length 64\n11:28:30.674953 ARP, Request who-has 172.254.1.0 tell ThePickleParty.lan, length 28\n11:28:31.190665 IP ThePickleParty.lan.51056 > 192.168.86.255.rfe: UDP, length 306\n</pre>\n\n运行数据包捕获时会注意到很多活动，这是可以预期的，因为后台有很多网络活动。在上面的示例中，我只截取了我捕获的片段，具体是我决定 ping www.google.com 时的时间。\n\n<b>理解输出</b>\n\n<pre>\n11:28:23.958840 IP icebox.lan > nuq04s29-in-f4.1e100.net: ICMP echo request, id 1901, seq 2, length 64\n11:28:23.970928 IP nuq04s29-in-f4.1e100.net > icebox.lan: ICMP echo reply, id 1901, seq 2, length 64\n</pre>\n\n<ul>\n<li>第一个字段是网络活动的时间戳</li>\n<li>IP，包含协议信息</li>\n<li>接下来，您会看到源地址和目标地址：icebox.lan > nuq04s29-in-f4.1e100.net</li>\n<li>seq，这是 TCP 数据包的起始和结束序列号</li>\n<li>length，字节长度</li>\n</ul>\n\n从我们的 tcpdump 输出中可以看出，我们正在向 www.google.com 发送 ICMP 回显请求数据包，并收到 ICMP 回显回复数据包！还要注意，不同的数据包将输出不同的信息，请参考手册查看这些信息。\n\n<b>将 tcpdump 输出写入文件</b>\n\n<pre>\n$ sudo tcpdump -w /some/file\n</pre>\n\n一些最后的想法：我们只是浅尝辄止地涉及了数据包分析的主题。您可以查看很多内容，我们甚至还没有深入研究十六进制和 ASCII 输出。有很多在线资源可以帮助您了解更多关于数据包分析工具的内容，我建议您去找找看！",
  "exercise": "下载并安装 Wireshark 工具，然后尝试使用界面。",
  "quizQuestion": "使用 tcpdump 捕获特定接口的标志是什么？",
  "quizAnswer": "-i",
  "slug": "packetanalysis"
}