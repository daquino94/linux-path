{
  "id": 3,
  "title": "磁盘解剖",
  "lessonContent": "硬盘可以被划分为分区，从本质上讲，这相当于创建了多个块设备。回想一下一些例子，比如 /dev/sda1 和 /dev/sda2，/dev/sda 代表整个磁盘，而 /dev/sda1 是该磁盘上的第一个分区。分区非常有用，可以用来分隔数据，如果需要某种文件系统，可以轻松地创建一个分区，而不是将整个磁盘作为一个文件系统类型。\n\n<b>分区表</b>\n\n每个磁盘都有一个分区表，该表告诉系统磁盘的分区情况。这个表告诉你分区的起始和结束位置，哪些分区是可引导的，磁盘的哪些扇区分配给了哪个分区等等。目前有两种主要的分区表方案，主引导记录（MBR）和全局唯一标识分区表（GPT）。\n\n<b>分区</b>\n\n磁盘由分区组成，帮助我们组织数据。你可以在一个磁盘上有多个分区，它们之间不能重叠。如果有未分配给任何分区的空间，那么它被称为未分配空间。分区的类型取决于你的分区表。在一个分区内，你可以有一个文件系统，或者将一个分区专门用于其他用途，比如交换空间（我们很快会讨论这个）。\n\n<i>MBR</i>\n\n<ul>\n<li>传统的分区表，曾被用作标准</li>\n<li>可以有主分区、扩展分区和逻辑分区</li>\n<li>MBR 有四个主分区的限制</li>\n<li>通过将主分区转换为扩展分区来创建额外的分区（一个磁盘上只能有一个扩展分区）。然后在扩展分区内添加逻辑分区。逻辑分区的使用方式与其他分区相同。有点奇怪，我知道。</li>\n<li>支持最大容量为 2TB 的磁盘</li>\n</ul>\n\n<i>GPT</i>\n\n<ul>\n<li>全局唯一标识分区表（GPT）正在成为磁盘分区的新标准</li>\n<li>只有一种类型的分区，可以创建多个</li>\n<li>每个分区都有一个全局唯一的 ID（GUID）</li>\n<li>主要与基于 UEFI 的引导一起使用（我们将在另一门课程中详细介绍）</li>\n</ul>\n\n<b>文件系统结构</b>\n\n我们从之前的课程中知道，文件系统是文件和目录的有序集合。简单来说，它由一个管理文件的数据库和实际文件本身组成，但我们将详细介绍一些内容。\n\n<ul>\n<li>引导块 - 位于文件系统的前几个扇区中，实际上并不被文件系统使用。它包含用于引导操作系统的信息。操作系统只需要一个引导块。如果你有多个分区，它们将有引导块，但其中许多是未使用的。</li>\n<li>超级块 - 这是位于引导块之后的单个块，包含有关文件系统的信息，如索引节点表的大小、逻辑块的大小和文件系统的大小。</li>\n<li>索引节点表 - 可以将其视为管理我们文件的数据库（我们有一整节课程讨论索引节点，所以不用担心）。每个文件或目录在索引节点表中都有一个唯一的条目，并且包含有关文件的各种信息。</li>\n<li>数据块 - 这是文件和目录的实际数据。</li>\n</ul>\n\n让我们看看不同的分区表。以下是使用 MBR 分区表（msdos）的一个分区示例。你可以看到主分区、扩展分区和逻辑分区。\n\n<pre>\npete@icebox:~$ sudo parted -l\nModel: Seagate (scsi)\nDisk /dev/sda: 21.5GB\nSector size (logical/physical): 512B/512B\nPartition Table: msdos\n\nNumber  Start   End     Size    Type      File system     Flags\n 1      1049kB  6860MB  6859MB  primary   ext4            boot\n 2      6861MB  21.5GB  14.6GB  extended\n 5      6861MB  7380MB  519MB   logical   linux-swap(v1)\n 6      7381MB  21.5GB  14.1GB  logical   xfs\n</pre>\n\n\n这个示例是 GPT，只使用了唯一的分区 ID。\n\n<pre>\nModel: Thumb Drive (scsi)\nDisk /dev/sdb: 4041MB\nSector size (logical/physical): 512B/512B\nPartition Table: gpt\n\nNumber  Start   End     Size     File system  Name        Flags\n 1      17.4kB  1000MB  1000MB                first\n 2      1000MB  4040MB  3040MB                second\n</pre>",
  "exercise": "在你的机器上运行 <b>parted -l</b> 并评估结果。",
  "quizQuestion": "在 MBR 分区方案中，用于创建超过 4 个分区的分区类型是什么？",
  "quizAnswer": "扩展",
  "slug": "anatomyofadisk"
}