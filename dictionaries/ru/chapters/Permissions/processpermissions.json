{
  "id": 7,
  "title": "Процесс разрешений",
  "lessonContent": "Давайте немного поговорим о разрешениях процессов. Помните, как я говорил вам, что при запуске команды passwd с включенным битом разрешения SUID программа будет запущена от имени root? Это правда, но это не означает, что поскольку вы временно root, вы можете изменять пароли других пользователей? Нет, к счастью, нет!\n\nЭто связано с множеством UID, которые реализует Linux. У каждого процесса есть три UID:\n\nПри запуске процесса он работает с теми же разрешениями, что и пользователь или группа, запустившие его, это известно как <b>эффективный идентификатор пользователя</b>. Этот UID используется для предоставления прав доступа процессу. Так что, если, например, Bob запустил команду touch, процесс будет работать от его имени, и любые созданные им файлы будут принадлежать ему.\n\nСуществует еще один UID, называемый <b>реальным идентификатором пользователя</b>, это идентификатор пользователя, который запустил процесс. Они используются для определения пользователя, запустившего процесс.\n\nПоследний UID - <b>сохраненный идентификатор пользователя</b>, который позволяет процессу переключаться между эффективным UID и реальным UID, и наоборот. Это полезно, потому что мы не хотим, чтобы наш процесс работал с повышенными привилегиями все время, хорошая практика использовать специальные привилегии в определенные моменты.\n\nТеперь давайте свяжем это все вместе, посмотрев на команду passwd еще раз.\n\nПри запуске команды passwd ваш эффективный UID - это ваш идентификатор пользователя, допустим, пусть это будет 500. О, но подождите, помните, что у команды passwd включено разрешение SUID. Так что, когда вы ее запускаете, ваш эффективный UID становится 0 (0 - это UID root). Теперь эта программа может обращаться к файлам как root.\n\nДопустим, вы почувствовали себя немного могущественным и хотите изменить пароль Sally, у Sally UID 600. Ну, вам не повезло, к счастью, процесс также имеет ваш реальный UID в данном случае 500. Он знает, что ваш UID - 500, и поэтому вы не можете изменить пароль UID 600. (Конечно, это всегда обходится, если вы суперпользователь на машине и можете контролировать и изменять все).\n\nПоскольку вы запустили passwd, процесс начнется с использованием вашего реального UID, и он сохранит UID владельца файла (эффективный UID), чтобы вы могли переключаться между ними. Нет необходимости изменять все файлы с доступом root, если это не требуется.\n\nБольшую часть времени реальный UID и эффективный UID совпадают, но в таких случаях, как команда passwd, они изменяются.",
  "exercise": "Мы еще не обсудили процессы, но мы все равно можем посмотреть, как это происходит в реальном времени:\n\n<ol>\n<li>Откройте одно окно терминала и запустите команду: <b>watch -n 1 \"ps aux | grep passwd\"</b>. Это будет отслеживать процесс passwd.</li>\n<li>Откройте второе окно терминала и запустите: <b>passwd</b></li>\n<li>Посмотрите на первое окно терминала, вы увидите процесс для passwd. Первый столбец в таблице процессов - это эффективный идентификатор пользователя, о чудо, это пользователь root!</li>\n</ol>",
  "quizQuestion": "Какой UID решает, какой доступ предоставить?",
  "quizAnswer": "эффективный",
  "slug": "processpermissions"
}